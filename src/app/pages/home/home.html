<p>
    We use your location to determine which bridge you are near.
</p>
<p>the blue circle represents the position of the user</p>
<p>the marker with a red circle is the bridge closest to the user. </p>
<p>
    press: <strong>control & shift & d</strong> for demo mode; to fake a position
</p>
<p>in /map click 'START ANIMATION'</p>
<p>
    in /map click on a blue marker to get the details about a bridge.
</p>
<p>
    login credential are hard coded for now; just click login
</p>

<button mat-raised-button
    color="primary"
    (click)="start()">Find nearby bridge</button>
@if(locationService.error()) {
{{ locationService.error() }}
}


@if(bridge()){
<h2>You are near:</h2>
<p><strong>{{ bridge().name }}</strong></p>

} @else {
<p>no bridge within range</p>
}
<button mat-raised-button
    color="accent"
    (click)="start()">Refresh location</button>


@if(bridgeStore.loading()){
<div>Loadingâ€¦</div>
}



@if(authStore.isLoggedIn()) {

<p>my location:</p>
@if(locationService.position()) {
<pre>
              Lat: {{ locationService.position().lat }}
              Lng: {{ locationService.position().lng }}
              Accuracy: {{ locationService.position().accuracy }}m
            </pre>

} @else {
<p>no location.position().coords</p>
}

@if(bridgeStore.error()){
<div class="error">{{ bridgeStore.error() }}</div>
}
<small>Location accuracy: {{ locationService.position()?.accuracy | number:'1.0-0' }} m</small>





@if(bridgeStore.bridges().length){

<ul>
    <h4>all bridges</h4>
    @for(bridge of bridgeStore.bridges();track $index) {
    <li class="name">{{ bridge.name }}</li>
    }

</ul>
}
}
